<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
      "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="org.hibernate.test.formulajoin">

    <class name="Entity" dynamic-insert="true" dynamic-update="true" select-before-update="true" optimistic-lock="dirty">
    	<composite-id name="id">
    		<key-property name="mandant" />
	        <key-property name="id" />
    	</composite-id>
        <many-to-one name="other" cascade="all">
        	<formula>case when other is null then null else mandant end</formula>
        	<column name="other" />
        </many-to-one>
    </class>

    <class name="OtherEntity">
    	<composite-id name="id">
    		<key-property name="mandant" />
	        <key-property name="id" />
    	</composite-id>
    </class>

</hibernate-mapping>
